<version
  xsi:noNamespaceSchemaLocation="classpath:com/runwaysdk/resources/xsd/version.xsd"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <doIt>
    <create>
      <mdBusiness
        name="net.geoprism.registry.Publish"
        table="publish"        
        exported="false">
        <attributes>
          <uuid
            name="uid"
            label="UID"
            required="true" />
          <json
            name="typeCodes"
            label="Type Codes"
            required="true" />
          <json
            name="exclusions"
            label="exclusions"
            required="false" />
          <dateTime
            name="forDate"
            label="For Date"
            required="true" />
          <dateTime
            name="startDate"
            label="Start Date"
            required="true" />
          <dateTime
            name="endDate"
            label="End Date"
            required="true" />
          <text
            name="origin"
            label="Origin"
            required="true" />
        </attributes>
      </mdBusiness>
      <mdBusiness
        name="net.geoprism.registry.Commit"
        exported="false">
        <attributes>
          <uuid
            name="uid"
            label="UID"
            required="true" />
          <reference
            name="publish"
            label="Publish"
            required="true"
            type="net.geoprism.registry.Publish" />
          <long
            name="lastOriginGlobalIndex"
            label="Last Origin Global Index"
            required="true" />
          <integer
            name="versionNumber"
            label="Version Number"
            required="true" />
        </attributes>
      </mdBusiness>

      <mdRelationship
        name="net.geoprism.registry.CommitHasSnapshot"
        label="Commit Has Snapshot"
        table="commit_has_snapshot"
        generateController="false"
        exported="false"
        publish="true">
        <parent
          cardinality="*"
          name="net.geoprism.registry.Commit"
          method="Commit" />
        <child
          cardinality="*"
          name="net.geoprism.graph.MetadataSnapshot"
          method="Snapshot" />
      </mdRelationship>

      <mdRelationship
        name="net.geoprism.registry.CommitHasDependency"
        label="Commit Has Dependency"
        table="commit_has_dependency"
        generateController="false"
        exported="false"
        publish="true">
        <parent
          cardinality="*"
          name="net.geoprism.registry.Commit"
          method="Dependency" />
        <child
          cardinality="*"
          name="net.geoprism.registry.Commit"
          method="Dependent" />
      </mdRelationship>

      <mdBusiness
        name="net.geoprism.registry.CommitHasDataSource"
        label="Commit Has Source"
        table="commit_has_source"
        generateController="false"
        exported="false"
        publish="true">
        <attributes>
          <reference
            name="commit"
            label="Commit"
            required="true"
            type="net.geoprism.registry.Commit" />
          <graphReference
            name="dataSource"
            label="Data Source"
            required="true"
            type="net.geoprism.registry.graph.DataSource" />
        
        </attributes>
      </mdBusiness>

    </create>
  </doIt>
  <undoIt>
    <delete>
      <object
        key="net.geoprism.registry.CommitHasDependency"
        type="com.runwaysdk.system.metadata.MdRelationship" />
      <object
        key="net.geoprism.registry.CommitHasSnapshot"
        type="com.runwaysdk.system.metadata.MdRelationship" />
      <object
        key="net.geoprism.registry.Publish"
        type="com.runwaysdk.system.metadata.MdBusiness" />
      <object
        key="net.geoprism.registry.Commit"
        type="com.runwaysdk.system.metadata.MdBusiness" />
    </delete>
  </undoIt>
</version>